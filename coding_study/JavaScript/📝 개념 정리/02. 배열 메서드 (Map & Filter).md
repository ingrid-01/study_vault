# Map & Filter: 데이터 가공 공장 #

: "반복문(for) 대신 쓰는 데이터 가공 공장"

- 리액트에서는 `for` 문을 거의 안 쓴다. 
- 대신 '원본은 건드리지 않고, 새로운 배열을 만들어내는' `map` 과 `filter` 를 쓴다
	- 데이터를 화면에 뿌릴 때 무조건 `map` 을 쓴다. 

## 1. Map (변신시키기) ##

- 핵심: 배열의 모든 요소를 꺼내서, 내가 원하는 형태로 바꿔서 새로운 배열을 만든다
- 특징: 원본 개수 = 결과물 개수 (10개 넣으면 10개 나옴)
- 공식: `배열.map ( (꺼낸거) => 바꿀거 )`

- 상황: 서버에서 가져온 글 목록 (data) 을 화면에 보여줄 HTML 태그 (div)로 바꿀 때 쓴다. 
```js
const data = ["JS 공부", "리액트 기초", "운동"];

// 하나씩 꺼내서(item) <div>로 감싸라
const result = data.map(item => `<div>${item}</div>`);

// 결과: ["<div>JS 공부</div>", "<div>리엑트 기초</div>", "<div>운동</div>"]
```

- 상황: 인사이트 덱에 저장된 스터디 주제 3개를 화면에 보여줄 버튼으로 반들고 싶다.
```js
const topics = ["Javascsript", "React", "Git"];

// topics를 돌면서, 각 단어(t)를 <button> 태그로 감싸라!
// (방금 배운 화살표 함수가 여기서 빛을 발한다)

const buttons = topics.map((t) => "<button>" + t + "</button>");

console.log(buttons);
// 결과: ["<button>Javascript</button>", "<button>React</button>", "<button>Git</button>"]
```

포인트: 원본 topics는 그대로 있고, buttons라는 새로운 배열이 생겼다. 

---

==예시에서 보여주는 item과 t는 선언되지 않았는데 어떻게 사용할 수 있는거야?==

---
## 2. Filter (걸러내기) ##

- 핵심: 조건이 "참"인 녀석들만 살아남는다. (거짓이면 탈락/삭제) 
- 특징: 원본 개수 >= 결과물 개수 (걸러지니까 줄어들 수 있음)
- 공식: `배열.filter( (꺼낸거) => 살려둘_조건 )`

- 상황: '삭제' 기능을 구현할 때 쓴다. (ID가 3번인 글을 지워라 = ID가 3번이 아닌 것만 남겨라)
```js
const numbers = [1, 2, 3, 4, 5];

// 3보다 큰 숫자만 남겨라
const result = numbers.filter(num => num > 3);

// 결과: [4, 5]
```

- 상황: 스터디 목록에서 완료된(isDone: true)것만 남기거나, 특정 ID를 삭제하고 싶을 때 쓴다.
```js
const numbers = [1, 2, 3, 4, 5];

// 짝수만 살려라 (나머지가 0인 것)
const evens = numbers.filter((num) => num % 2 === 0);

console.log(evens); // [2, 4]
```

- 상황:  인사이트덱 - 공부 시간(time)이 3시간 이상인 것만 보고 싶다
```js
const studies = [
  { id: 1, subject: "JS", time: 2 },
  { id: 2, subject: "React", time: 5 }, // < - 얘만 살아야 함
];

// "시간(s.time)이 3보다 큰 녀석만 통과!"
const result = studies.filter(s => s.time > 3);

console.log(result);
// 결과: [{ id: 2, subject; "React", time: 5 }]
```

---
### Quiz ###

상황: 당신은 인사이트 덱의 관리자 페이지를 만들고 있다. 
users 배열에는 회원 정보가 담겨 있다. 

1. Filter: 나이가 30세 이상인 회원만 고른다. 
2. Map: 골라낸 회원의 이름을 "VIP 회원: `[이름]`" 형태로 바꾼다. 

두 단계로 나눠서 생각하기:
```js
const users = [
  { name: "Ingrid", age: 32 },
  { name: "Y", age: 25 },
  { name: "Admin", age: 40 }
];

// 1단계: 30세 이상만 필터링 (정답을 적어봐라)
const olderUsers = users.filter(user => ________);

// 2단계: 필터링된 유저들의 이름만 VIP 명찰 달아주기 (정답을 적어봐라)
const vipLabels = olderUsers.map(user => _______);

console.log(vipLabels);
// 예상 결과: ["VIP 회원: Ingrid", "VIP 회원: Admin"]
```

답:
```js
const users = [
  { name: "Ingrid", age: 32 },
  { name: "Y", age: 25 },
  { name: "Admin", age: 40 }
];

const olderUsers = users.filter(user => user.age >= 30);

const vipLabels = olderUsers.map(user => "VIP 회원: " + user.name);
//또는 템플릿 리터럴 사용 시:
// const vipLabels = olderUsers.map(user => `VIP 회원: ${user.name}`)

console.log(vipLabels);

```

---

⚠️ 매번 `user.age`, `user.name`, `user.어쩌구` 치기 귀찮고 헷갈림
- **구조 분해 할당 (Destructuring)** 사용하면 된다

예시:
```js
// 구조 분해 할당을 쓰면 'user.'을 생략할 수 있다!
const olderUsers = users.filter(({ age }) => age >= 30);
```

---
