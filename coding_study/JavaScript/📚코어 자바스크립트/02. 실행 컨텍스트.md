## 실행 컨텍스트(Execution Context)

### 기본 개념

**실행 컨텍스트란?**
코드를 실행하는 데 필요한 배경이 되는 조건과 환경 정보를 담은 객체입니다. 동일한 환경을 지니는 코드 뭉치를 실행할 때 필요한 환경 정보를 의미합니다.

**실행 컨텍스트가 생성되는 경우**
- 전역 공간
- 함수
- eval (사용 권장하지 않음)
- 모듈

결국 자바스크립트에서는 **함수에 의해서만 컨텍스트를 구분**할 수 있습니다.

### 콜 스택(Call Stack)

실행 컨텍스트는 콜 스택에 쌓이며, **LIFO(Last In First Out)** 방식으로 동작합니다.

**실행 순서**
1. 전역 컨텍스트 생성 및 실행
2. 함수 호출 시 해당 함수의 실행 컨텍스트 생성
3. 가장 최근에 추가된 컨텍스트부터 실행
4. 실행 완료된 컨텍스트부터 제거

### 실행 컨텍스트의 구성 요소

**1. Variable Environment**
- 최초 식별자 정보만 수집
- 값의 변화를 반영하지 않음

**2. Lexical Environment**
- 식별자 정보를 수집하고 실시간으로 변경 사항 추적
- Environment Record와 Outer Environment Reference로 구성

**3. This Binding**

### Lexical Environment 상세

**Environment Record**
- 현재 컨텍스트 내부의 식별자 정보를 수집
- 이 수집 과정을 쉽게 이해하기 위한 개념이 **호이스팅**
- 호이스팅: 식별자 정보를 실행 컨텍스트 맨 위로 끌어올리는 것처럼 동작
- 함수 선언문은 전체를 끌어올리고, 변수는 선언부만 끌어올림

**Outer Environment Reference**
- 외부 Lexical Environment를 참조
- 이를 통해 **스코프 체인** 형성

### 스코프와 스코프 체인

**스코프(Scope)**
변수의 유효 범위로, 실행 컨텍스트에 의해 결정됩니다.

**스코프 체인(Scope Chain)**
- 변수를 찾을 때 자신의 Environment Record부터 검색
- 없으면 Outer Environment Reference를 따라 외부로 이동하며 검색
- 가장 가까운 곳에서 먼저 찾은 변수를 사용

**특징**
- 외부로는 접근 가능하지만 내부로는 접근 불가
- 내부 함수에서 선언한 변수는 외부에서 접근 불가
- 같은 이름의 변수가 여러 스코프에 있으면 가장 가까운 스코프의 변수 사용 (**Shadowing**)

### 실행 과정 예시

```
전역 컨텍스트 생성
→ Environment Record 수집
→ 코드 실행
→ 함수 호출 시 새로운 컨텍스트 생성
→ 해당 컨텍스트의 Environment Record 수집
→ 코드 실행
→ 함수 종료 시 컨텍스트 제거
→ 이전 컨텍스트로 복귀
```

이러한 메커니즘을 통해 자바스크립트는 변수의 유효 범위를 관리하고, 함수 실행 순서를 제어하며, 클로저와 같은 고급 기능을 구현할 수 있습니다.